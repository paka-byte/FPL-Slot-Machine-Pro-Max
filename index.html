<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>FPL Slot Machine ‚Äî Pro Max (DataFPL)</title>
<style>
  :root {
    --bg1:#0b2f24; --bg2:#0a7e6e;
    --accent:#00ff88; --danger:#ff4444; --text:#eafcf3;
  }
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:system-ui,-apple-system,Segoe UI,Roboto,'Trebuchet MS',sans-serif;
    color:var(--text);
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    min-height:100vh;display:flex;flex-direction:column;align-items:center;
  }
  h1{
    margin:20px 12px 6px;text-align:center;
    font-size:clamp(1.6rem,3.8vw,2.6rem);
    text-shadow:0 2px 8px rgba(0,0,0,.45)
  }
  .sub{opacity:.9;margin-bottom:12px;font-size:.95rem;padding:6px 12px;
    background:rgba(255,255,255,.08);border-radius:12px}
  .wrap{width:min(960px,100%);padding:0 14px 18px}
  .controls{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:10px}
  @media(max-width:820px){.controls{grid-template-columns:1fr}}
  .control-card{
    background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);
    border-radius:14px;padding:14px;box-shadow:0 8px 20px rgba(0,0,0,.25);
    backdrop-filter:blur(6px)
  }
  .control-card h3{margin-bottom:10px;font-size:1rem;opacity:.95}
  .input-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:10px}
  .input-container input{
    padding:10px;border:none;border-radius:10px;
    background:#fff;color:#111;font-size:15px;text-align:center;
    box-shadow:inset 0 -2px 0 rgba(0,0,0,.15)
  }
  .row{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
  select,.stat,.small-btn{
    padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.15);
    font-weight:600
  }
  select{background:#fff;color:#111}
  .stat{background:#0e2f26;color:#eafcf3;min-width:110px;text-align:center}
  .small-btn{background:#18352e;color:#fff;cursor:pointer}
  .small-btn:hover{filter:brightness(1.15)}
  .reels{display:flex;justify-content:center;gap:16px;margin:22px 0}
  .reel{
    width:clamp(100px,22vw,140px);height:clamp(100px,22vw,140px);
    background:#fff;color:#111;font-weight:800;
    display:flex;align-items:center;justify-content:center;
    border-radius:14px;font-size:clamp(18px,3.6vw,28px);
    box-shadow:0 10px 25px rgba(0,0,0,.35)
  }
  .btns{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:12px 0}
  button{padding:12px 18px;font-size:16px;font-weight:700;border:none;border-radius:12px;cursor:pointer}
  #spinBtn{background:var(--accent);color:#001b0e}
  #resetBtn{background:var(--danger);color:#fff;display:none}
  #muteBtn{background:#222;color:#fff}
  #saveBtn{background:#0b0b0b;color:#fff}
  #result{margin:12px 0;font-size:clamp(20px,3.8vw,30px);font-weight:800;text-align:center;min-height:40px}
  #history{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:6px}
  .chip{background:#083228;padding:6px 10px;border-radius:999px;box-shadow:0 4px 12px rgba(0,0,0,.25)}
  canvas{position:fixed;inset:0;pointer-events:none;z-index:999}
  footer{margin-top:auto;opacity:.8;padding:12px 0;font-size:.9rem}
</style>
<link rel="preload" href="./sounds/spin.mp3" as="audio">
<link rel="preload" href="./sounds/tick.mp3" as="audio">
<link rel="preload" href="./sounds/goal.mp3" as="audio">
</head>
<body>
  <h1>üé∞ FPL Slot Machine ‚Äî Pro Max (DataFPL)</h1>
  <div class="sub">Weighted jackpot: starts <b>20%</b>, +<b>10%</b> each miss, resets to 20% on hit</div>

  <div class="wrap">
    <div class="controls">
      <div class="control-card">
        <h3>Players</h3>
        <div class="input-container" id="inputs"></div>
        <div class="row">
          <button id="addSlotBtn" class="small-btn">Ôºã ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á</button>
          <button id="removeSlotBtn" class="small-btn">Ôºç ‡∏•‡∏î‡∏ä‡πà‡∏≠‡∏á</button>
        </div>
        <div style="opacity:.8;font-size:.85rem;margin-top:8px">Tip: ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ä‡∏∑‡πà‡∏≠ (‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏à‡∏≥‡∏Ñ‡πà‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á)</div>
      </div>
      <div class="control-card">
        <h3>Theme & Stats</h3>
        <div class="row">
          <select id="themeSelect">
            <option value="Default">Default (Green)</option>
            <option value="Arsenal">Arsenal</option>
            <option value="Liverpool">Liverpool</option>
            <option value="ManCity">Man City</option>
            <option value="Spurs">Spurs</option>
            <option value="Chelsea">Chelsea</option>
            <option value="ManUnited">Man United</option>
          </select>
          <div class="stat" id="statSpins">Spins: 0</div>
          <div class="stat" id="statJackpots">Jackpots: 0</div>
          <div class="stat" id="statRate">Rate: 0%</div>
          <div class="stat" id="statChance">Chance: 20%</div>
        </div>
      </div>
    </div>

    <div class="reels">
      <div class="reel" id="reel1">?</div>
      <div class="reel" id="reel2">?</div>
      <div class="reel" id="reel3">?</div>
    </div>

    <div class="btns">
      <button id="spinBtn">SPIN!</button>
      <button id="resetBtn">Play Again</button>
      <button id="muteBtn">üîä Sound On</button>
      <button id="saveBtn">üíæ Save</button>
    </div>

    <div id="result"></div>
    <div id="history"></div>
  </div>

  <canvas id="confetti"></canvas>

<script>
(() => {
  const LS_KEY="fplslot_v5";
  const MIN_SLOTS=3, MAX_SLOTS=12;
  let state={spinCount:0,jackpots:0,names:["Salah","Haaland","Saka","Ekitike","Bruno","Palmer"],theme:"Default",history:[],jackpotChance:0.2};

  const reels=[document.getElementById("reel1"),document.getElementById("reel2"),document.getElementById("reel3")];
  const inputsWrap=document.getElementById("inputs");
  const themeSelect=document.getElementById("themeSelect");
  const statSpins=document.getElementById("statSpins"),statJackpots=document.getElementById("statJackpots"),statRate=document.getElementById("statRate"),statChance=document.getElementById("statChance");
  const resultDiv=document.getElementById("result"),historyDiv=document.getElementById("history");
  const spinBtn=document.getElementById("spinBtn"),resetBtn=document.getElementById("resetBtn"),muteBtn=document.getElementById("muteBtn");

  // AUDIO (short)
  const spinMusic=new Audio('./sounds/spin.mp3');
  const tickSound=new Audio('./sounds/tick.mp3');
  const jackpotSound=new Audio('./sounds/goal.mp3');
  [spinMusic,tickSound,jackpotSound].forEach(a=>{a.playsInline=true;a.preload='auto';});
  function playTick(){if(muted)return;const s=tickSound.cloneNode(true);s.volume=0.25;s.play().catch(()=>{});setTimeout(()=>{try{s.pause()}catch(e){}},120);}
  function playSpin(){if(muted)return;try{spinMusic.currentTime=0;spinMusic.play().catch(()=>{});setTimeout(()=>{try{spinMusic.pause()}catch(e){}},1600);}catch(e){}}
  function playJackpot(){if(muted)return;try{jackpotSound.currentTime=0;jackpotSound.play().catch(()=>{});setTimeout(()=>{try{jackpotSound.pause()}catch(e){}},1200);}catch(e){}}

  let muted=false;function setMuted(on){muted=on;[spinMusic,tickSound,jackpotSound].forEach(a=>a.muted=on);muteBtn.textContent=muted?"üîá Sound Off":"üîä Sound On";}
  muteBtn.onclick=()=>setMuted(!muted);

  function renderInputs(){inputsWrap.innerHTML="";state.names.forEach((n,i)=>{const inp=document.createElement("input");inp.value=n||"";inp.placeholder=`Player ${i+1}`;inp.onchange=saveNames;inp.onkeydown=e=>{if(e.key==="Enter"){e.preventDefault();saveNames();inp.blur()}};inputsWrap.appendChild(inp);});}
  function saveNames(){state.names=[...inputsWrap.querySelectorAll("input")].map(i=>(i.value||"").trim());saveState();}
  function getFaces(){const arr=[...inputsWrap.querySelectorAll("input")].map(i=>(i.value||"").trim()).filter(Boolean);return arr.length?arr:["?","?","?","?","?","?"];}

  document.getElementById("addSlotBtn").onclick=()=>{if(state.names.length>=MAX_SLOTS)return;state.names.push("");saveState();renderInputs();};
  document.getElementById("removeSlotBtn").onclick=()=>{if(state.names.length<=MIN_SLOTS)return;state.names.pop();saveState();renderInputs();};

  // confetti
  const canvas=document.getElementById("confetti"),ctx=canvas.getContext("2d");
  function resizeCanvas(){canvas.width=innerWidth;canvas.height=innerHeight;}
  resizeCanvas();addEventListener("resize",resizeCanvas);
  let fxToken=0;function clearEffects(){fxToken++;ctx.clearRect(0,0,canvas.width,canvas.height);}
  function makeConfetti(){resizeCanvas();const myToken=++fxToken,particles=[];for(let i=0;i<200;i++)particles.push({x:Math.random()*canvas.width,y:-20-Math.random()*canvas.height,r:Math.random()*4+2,color:`hsl(${Math.random()*360},100%,50%)`,vy:2+Math.random()*2,vx:-1+Math.random()*2});const start=performance.now();function draw(now){if(myToken!==fxToken)return;const elapsed=now-start;ctx.clearRect(0,0,canvas.width,canvas.height);particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;ctx.beginPath();ctx.fillStyle=p.color;ctx.arc(p.x,p.y,p.r,0,Math.PI*2);ctx.fill();});if(elapsed<4000)requestAnimationFrame(draw);}requestAnimationFrame(draw);}
  function makeFirework(){resizeCanvas();const myToken=++fxToken,x=Math.random()*canvas.width,y=Math.random()*canvas.height/2,ps=[];for(let i=0;i<60;i++){const a=(i/60)*Math.PI*2,s=1+Math.random()*5.5;ps.push({x,y,r:2,dx:Math.cos(a)*s,dy:Math.sin(a)*s,color:`hsl(${Math.random()*360},100%,50%)`});}const start=performance.now();function anim(now){if(myToken!==fxToken)return;const t=now-start;ctx.clearRect(0,0,canvas.width,canvas.height);ps.forEach(p=>{p.x+=p.dx;p.y+=p.dy;p.r*=0.97;ctx.beginPath();ctx.arc(p.x,p.y,Math.max(.2,p.r),0,Math.PI*2);ctx.fillStyle=p.color;ctx.fill();});if(t<900)requestAnimationFrame(anim);}requestAnimationFrame(anim);}

  function refreshStats(){statSpins.textContent="Spins: "+state.spinCount;statJackpots.textContent="Jackpots: "+state.jackpots;statRate.textContent="Rate: "+(state.spinCount?((state.jackpots/state.spinCount)*100).toFixed(1):"0")+"%";statChance.textContent="Chance: "+Math.round((state.jackpotChance||0.2)*100)+"%";historyDiv.innerHTML="";state.history.slice(-8).reverse().forEach(h=>{const c=document.createElement("div");c.className="chip";c.textContent=h.text;historyDiv.appendChild(c);});}
  function saveState(){localStorage.setItem(LS_KEY,JSON.stringify(state));}
  function loadState(){try{const raw=localStorage.getItem(LS_KEY);if(raw)Object.assign(state,JSON.parse(raw));}catch(e){}}

  let spinning=false;
  function spin(){if(spinning)return;spinning=true;state.spinCount++;saveState();refreshStats();const faces=getFaces();const roll=Math.random();const isJackpot=roll<(state.jackpotChance??0.2);state.jackpotChance=isJackpot?0.2:Math.min((state.jackpotChance??0.2)+0.1,1.0);saveState();refreshStats();const jackpotSymbol=faces[Math.floor(Math.random()*faces.length)],durations=[1700,2500,3300];if(!muted)playSpin();const start=performance.now(),starts=[start,start,start],done=[false,false,false];function updateReel(i,now){const elapsed=now-starts[i];if(elapsed<durations[i]){const rand=Math.floor(Math.random()*faces.length);reels[i].textContent=faces[rand];if(!muted&&elapsed-(reels[i]._lastTick||0)>110){playTick();reels[i]._lastTick=elapsed;}}else if(!done[i]){reels[i].textContent=isJackpot?jackpotSymbol:faces[Math.floor(Math.random()*faces.length)];done[i]=true;}}function loop(now){updateReel(0,now);updateReel(1,now);updateReel(2,now);if(done.every(Boolean))endSpin(isJackpot,jackpotSymbol);else requestAnimationFrame(loop);}requestAnimationFrame(loop);spinBtn.disabled=true;resetBtn.style.display="none";}
  function endSpin(isJackpot,symbol){let text;if(isJackpot){state.jackpots++;saveState();refreshStats();text="üéâ YOUR CAPTAIN IS ... "+symbol+" üéâ";makeConfetti();for(let i=0;i<4;i++)setTimeout(makeFirework,i*600);if(!muted)playJackpot();}else{text=reels.map(r=>r.textContent).join(" | ");}resultDiv.textContent=text;state.history.push({ts:Date.now(),text});if(state.history.length>24)state.history.shift();saveState();refreshStats();spinBtn.disabled=false;resetBtn.style.display="inline-block";spinning=false;}
  function resetGame(){resultDiv.textContent="";reels.forEach(r=>r.textContent="?");resetBtn.style.display="none";clearEffects();}

  // init
  loadState();if(!Array.isArray(state.names)||state.names.length===0)state.names=["Salah","Haaland","Saka","Ekitike","Bruno","Palmer"];renderInputs();refreshStats();

  spinBtn.onclick=spin;resetBtn.onclick=resetGame;
})();
</script>

<footer>Created by Kong DataFPL üíö ‚Äî SLLVP (accountant, not developer)</footer>
</body>
</html>
